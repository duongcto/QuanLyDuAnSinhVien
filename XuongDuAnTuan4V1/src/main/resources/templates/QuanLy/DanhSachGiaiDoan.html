<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giao di·ªán Qu·∫£n l√Ω d·ª± √°n</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/icofont/1.0.1/css/icofont.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
        /* --- General Styles --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f4f5f7;
            margin: 0;
            padding: 20px;
            color: #172b4d;
        }

        /* --- Main Container --- */
        .project-container {
            max-width: 900px;
            margin: auto;
        }

        /* --- Header Section --- */
        .project-header {
            margin-bottom: 24px;
        }

        .project-title h1 {
            font-size: 24px;
            margin: 0 0 4px 0;
            font-weight: 600;
        }

        .project-status {
            display: inline-block;
            background-color: #007bff;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 700;
        }

        /* --- Actions Bar --- */
        .actions-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #ffffff;
            padding: 12px;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            margin-top: 16px;
        }

        .actions-bar .search-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .actions-bar .search-group input {
            border: 1px solid #dfe1e6;
            border-radius: 3px;
            padding: 8px;
            font-size: 14px;
        }

        .actions-bar .search-group label {
            font-size: 14px;
            font-weight: 500;
        }

        .actions-bar .button-group {
            display: flex;
            gap: 10px;
        }

        /* --- General Button Styles --- */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-family: inherit;
            font-size: 14px;
            font-weight: 500;
            padding: 6px 12px;
            border-radius: 3px;
            border: 1px solid transparent;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
        }

        .btn svg {
            width: 16px;
            height: 16px;
        }

        .btn-light {
            background-color: #f4f5f7;
            border-color: #dfe1e6;
            color: #42526e;
        }

        .btn-light:hover {
            background-color: #e9ecef;
        }

        .btn-primary {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }

        .btn-primary:hover {
            background-color: #0069d9;
        }

        .btn-secondary {
            background-color: #e9f2ff;
            color: #007bff;
            border-color: #e9f2ff;
        }

        .btn-secondary:hover {
            background-color: #d1e3ff;
        }


        /* --- Card Styles --- */
        .card {
            background-color: #ffffff;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .card-header {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-bottom: 1px solid #dfe1e6;
        }

        .card-header .toggle-icon {
            cursor: pointer;
            margin-right: 8px;
            color: #5e6c84;
            font-size: 20px;
            line-height: 1;
        }

        .card-header h3 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
        }

        .card-header .date-range {
            margin-left: 16px;
            font-size: 14px;
            color: #5e6c84;
        }

        .card-header .header-buttons {
            margin-left: auto;
            display: flex;
            gap: 8px;
        }

        .card-body {
            padding: 16px;
            min-height: 150px;
        }

        .card-body.empty {
            /* For the empty state as in the image */
            background-color: #f9f9f9;
        }

        .card-footer {
            padding: 12px 16px;
            border-top: 1px solid #f0f0f0;
        }

        .btn-add {
            background-color: #f4f5f7;
            color: #42526e;
        }
        .btn-add:hover {
            background-color: #dfe1e6;
        }

        /* --- Task Input Area --- */
        .task-input-area {
            border: 2px dashed #dfe1e6;
            border-radius: 5px;
            min-height: 80px;
            padding: 10px;
        }

        .task-item {
            display: flex;
            align-items: center;
            justify-content: space-between; /* ƒê·∫©y c√°c ph·∫ßn t·ª≠ ra xa nhau */
            background-color: #ffffff;
            border: 1px solid #dfe1e6;
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            font-size: 14px;
        }

        .task-left-section {
            display: flex;
            align-items: center;
            gap: 15px; /* Kho·∫£ng c√°ch gi·ªØa checkbox v√† t√™n */
        }

        .task-name {
            font-weight: 500;
            color: #172b4d;
        }

        .task-meta {
            display: flex;
            align-items: center;
            gap: 20px; /* Kho·∫£ng c√°ch gi·ªØa ng√†y v√† ∆∞u ti√™n */
        }

        .task-date {
            color: #5e6c84;
        }

        .task-priority {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 12px;
            text-transform: capitalize; /* Ch·ªØ c√°i ƒë·∫ßu vi·∫øt hoa */
        }

        .priority-thap {
            background-color: #fbf0dc; /* M√†u v√†ng nh·∫°t */
            color: #c98b00; /* M√†u v√†ng ƒë·∫≠m */
        }

        /* Th√™m c√°c class ∆∞u ti√™n kh√°c n·∫øu c√≥:
        .priority-trung-binh { background-color: #e3fcef; color: #006644; }
        .priority-cao { background-color: #ffebe6; color: #bf2600; }
        */

        .task-voting {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #5e6c84;
        }

        .task-voting span {
            font-weight: 500;
        }
        .deleteGiaiDoan{
            padding-left: 10px;
            cursor: pointer;
        }

        .inputContainer input.tenGiaoViec {
            width: 250px;           /* Chi·ªÅu r·ªông c·ªë ƒë·ªãnh */
            padding: 8px 12px;      /* ƒê·ªám trong ƒë·ªÉ d·ªÖ nh·∫≠p li·ªáu */
            font-size: 16px;        /* C·ª° ch·ªØ v·ª´a ph·∫£i */
            border: 1.5px solid #ccc; /* Vi·ªÅn m√†u x√°m nh·∫°t */
            border-radius: 4px;     /* Bo g√≥c nh·∫π */
            outline: none;          /* B·ªè vi·ªÅn m·∫∑c ƒë·ªãnh khi focus */
            transition: border-color 0.3s ease;
        }

        .inputContainer input.tenGiaoViec:focus {
            border-color: #007bff;  /* Vi·ªÅn xanh khi focus */
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }

        .inputContainer .btnLuuGiaiDoan {
            margin-left: 10px;
            padding: 8px 16px;
            font-size: 16px;
            background-color: #007bff;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .inputContainer .btnLuuGiaiDoan:hover {
            background-color: #0056b3;
        }

        .inputCongViec input.tenDanhSachCongViec {
            width: 250px;               /* Chi·ªÅu r·ªông c·ªë ƒë·ªãnh */
            padding: 8px 12px;          /* ƒê·ªám trong ƒë·ªÉ d·ªÖ nh·∫≠p li·ªáu */
            font-size: 16px;            /* C·ª° ch·ªØ v·ª´a ph·∫£i */
            border: 1.5px solid #ccc;   /* Vi·ªÅn m√†u x√°m nh·∫°t */
            border-radius: 4px;         /* Bo g√≥c nh·∫π */
            outline: none;              /* B·ªè vi·ªÅn m·∫∑c ƒë·ªãnh khi focus */
            transition: border-color 0.3s ease;
        }

        .inputCongViec input.tenDanhSachCongViec:focus {
            border-color: #007bff;      /* Vi·ªÅn xanh khi focus */
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }

        .inputCongViec .btnLuuCongViec {
            margin-left: 10px;
            padding: 8px 16px;
            font-size: 16px;
            background-color: #007bff;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .inputCongViec .btnLuuCongViec:hover {
            background-color: #0056b3;
        }

        /* Form chi ti·∫øt c√¥ng vi·ªác - modal ch√≠nh */
        .formCongViecChiTiet {
            display: flex;
            width: 820px;
            gap: 20px;
            padding: 20px;
            background: #f4f5f7;
            font-family: sans-serif;

            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .main-content, .sidebar {
            background: #fff; padding: 20px; border-radius: 3px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .main-content { flex-grow: 1; }
        .sidebar { width: 250px; }
        h3 { margin-top: 0; color: #5e6c84; display: flex; align-items: center; gap: 8px; }
        button { border: 1px dashed #ccc; background: #f4f5f7; padding: 5px 10px; border-radius: 3px; cursor: pointer; margin-right: 5px; }
        .priority-group { display: flex; align-items: center; gap: 5px; }
        .priority-group .current-priority { background: #dfe1e6; padding: 5px 10px; border-radius: 3px; }
        textarea { width: 100%; min-height: 60px; border: 1px solid #ccc; border-radius: 3px; padding: 8px; box-sizing: border-box; }
        .progress-bar-container { background: #dfe1e6; border-radius: 3px; height: 8px; margin-bottom: 10px; overflow: hidden; }
        .progress-bar { background: #0079bf; height: 100%; width: 0; }
        .add-button { background: #0079bf; color: #fff; border: none; padding: 8px 15px; border-radius: 3px; cursor: pointer; }
        .add-button:hover { background: #0052cc; }
        .sidebar-item { display: flex; align-items: center; padding: 8px 12px; margin-bottom: 8px; background: #f4f5f7; border-radius: 3px; cursor: pointer; }
        .sidebar-item:hover { background: #e1e4e8; }
        .comment-box { display: flex; gap: 10px; align-items: flex-start; }
        .avatar { width: 32px; height: 32px; background: #ccc; border-radius: 50%; }
        .comment-input { flex-grow: 1; position: relative; }
        .send-icon { position: absolute; right: 10px; bottom: 10px; cursor: pointer; color: #5e6c84; }
        .toggle-details { color: #5e6c84; cursor: pointer; font-size: 0.9em; }
        .sidebar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; color: #5e6c84; }
        .close-btn { cursor: pointer; font-size: 1.2em; }


        .priority-thap {
            background-color: #577590;
            color: #fff;
            padding: 3px 6px;
            border-radius: 4px;
        }
        .fromKieuCV {
            font-family: Arial, sans-serif;
            background-color: rgba(0, 0, 0, 0.3); /* l√†m t·ªëi n·ªÅn */
            position: fixed;
            z-index: 9999;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex; /* th√™m d√≤ng n√†y ƒë·ªÉ b·∫≠t flexbox */
            justify-content: center;
            align-items: center;
        }
        .fromNhan {
            font-family: Arial, sans-serif;
            background-color: rgba(0, 0, 0, 0.3); /* l√†m t·ªëi n·ªÅn */
            position: fixed;
            z-index: 9999;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex; /* th√™m d√≤ng n√†y ƒë·ªÉ b·∫≠t flexbox */
            justify-content: center;
            align-items: center;
        }
        .label-modal-overlay {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
        }
        .label-form-container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            width: 400px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .label-form-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .label-form-header h3 {
            margin: 0;
            font-size: 1.15em;
            color: #333;
        }

        .label-form-header .close-button {
            background: none;
            border: none;
            font-size: 1.5em; /* Larger X for closer look */
            cursor: pointer;
            color: #888;
            line-height: 1; /* Remove extra space above/below X */
            padding: 0; /* Remove default button padding */
        }

        .label-search-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
            margin-bottom: 20px;
            box-sizing: border-box; /* Include padding in width */
        }

        .label-search-input::placeholder {
            color: #aaa;
        }

        .add-label-button {
            width: 100%;
            padding: 12px;
            background-color: #36454F; /* Dark background, similar to image */
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px; /* Space between icon and text */
            transition: background-color 0.2s ease;
        }

        .add-label-button:hover {
            background-color: #2F3C47; /* Slightly darker on hover */
        }

        .add-label-button .icon {
            font-size: 1.2em; /* Adjust icon size */
        }

        /* ·∫®n modal to√†n b·ªô ban ƒë·∫ßu */
        .fromNgayHan {
            display: none; /* ‚úÖ B·ªè comment d√≤ng n√†y */
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.4); /* m·ªù n·ªÅn */
            z-index: 9998;
            justify-content: center;
            align-items: center;
        }

        /* Modal ch√≠nh v·∫´n gi·ªØ styling hi·ªán t·∫°i */
        .modal-container {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 9999;
            width: 360px;
            padding: 20px 24px;
            box-sizing: border-box;
        }

        /* --- Modal Header --- */
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            font-size: 1.25rem; /* 20px */
            font-weight: 600;
            color: #172b4d;
            margin: 0;
        }

        .close-button {
            background: none;
            border: none;
            font-size: 1.5rem; /* 24px */
            color: #6b778c;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }

        /* --- Form Group --- */
        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            font-size: 0.875rem; /* 14px */
            font-weight: 600;
            color: #5e6c84;
            margin-bottom: 6px;
        }

        /* --- Input & Select Fields --- */
        .input-field {
            width: 100%;
            padding: 8px 12px;
            font-size: 0.9375rem; /* 15px */
            border: 2px solid #dfe1e6;
            border-radius: 4px;
            background-color: #fafbfc;
            box-sizing: border-box;
            transition: border-color 0.2s, background-color 0.2s;
        }

        .input-field:focus{
            outline: none;
            border-color: #4c9aff;
            background-color: #ffffff;
        }


        /* --- Specific field styling --- */
        .date-input-wrapper {
            position: relative;
        }

        .date-input-wrapper::after {
            content: 'üìÖ';
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #5e6c84;
            pointer-events: none; /* Allows clicking through to the input */
        }

        .input-field::placeholder {
            color: #a5adba;
        }

        /* --- Action Buttons --- */
        .button-group {
            display: flex;
            gap: 8px; /* Space between buttons */
        }

        .btn {
            padding: 10px;
            font-size: 0.9375rem; /* 15px */
            font-weight: 500;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
        }

        .btn-save {
            background-color: #2c3e50; /* Dark blue/charcoal */
            color: #ffffff;
        }

        .btn-save:hover {
            background-color: #34495e;
        }

        /* --- H·ªôp ch·ª©a modal --- */
        .upload-modal {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            width: 380px;
            padding: 20px 24px;
            box-sizing: border-box;
        }



        /* --- Ph·∫ßn ƒë·∫ßu c·ªßa modal --- */
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-header h2 {
            font-size: 1.125rem; /* 18px */
            font-weight: 600;
            color: #172b4d;
            margin: 0;
        }

        .close-button {
            background: none;
            border: none;
            font-size: 1.5rem; /* 24px */
            color: #6b778c;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }

        /* --- Form --- */
        .fromAnh .form-group {
            margin-bottom: 16px;
        }

        .fromAnh label {
            /*display: none;*/
            font-size: 0.875rem; /* 14px */
            font-weight: 600;
            color: #5e6c84;
            margin-bottom: 8px;
        }
        .submit-button:hover {
            background-color: #34495e;
        }

        /* --- H·ªôp ch·ª©a modal --- */
        .fromAnh {
            display: none;
            position: fixed;
            z-index: 9999;
            top: 0; left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.4);
            justify-content: center;
            align-items: center;
        }

        .upload-modal {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            width: 380px;
            padding: 20px 24px;
            box-sizing: border-box;
        }

        /* --- Ph·∫ßn ƒë·∫ßu c·ªßa modal --- */
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-header h2 {
            font-size: 1.125rem; /* 18px */
            font-weight: 600;
            color: #172b4d;
            margin: 0;
        }

        .close-buttonAnh {
            background: none;
            border: none;
            font-size: 1.5rem; /* 24px */
            color: #6b778c;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }

        /* --- Form --- */
        .fromAnh .form-group {
            margin-bottom: 16px;
        }
        .submit-button {
            width: 100%;
            padding: 12px;
            font-size: 0.9375rem; /* 15px */
            font-weight: 500;
            color: #ffffff;
            background-color: #2c3e50; /* M√†u xanh ƒë·∫≠m/than */
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 8px;
            transition: background-color 0.2s;
        }

        .submit-button:hover {
            background-color: #34495e;
        }

        /*form link dinh kem*/
        .formLink {
            display: none;
            position: fixed;
            z-index: 9999;
            top: 0; left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.4);
            justify-content: center;
            align-items: center;
        }
        /* --- H·ªôp ch·ª©a modal --- */
        .modal-containerLink {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);
            width: 420px;
            padding: 24px;
            box-sizing: border-box;
        }

        /* --- Ph·∫ßn ƒë·∫ßu c·ªßa modal --- */
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-header h2 {
            font-size: 1.25rem; /* 20px */
            font-weight: 600;
            color: #172b4d;
            margin: 0;
        }

        .close-buttonLink {
            background: none;
            border: none;
            font-size: 1.6rem; /* 26px */
            color: #6b778c;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }

        /* --- Form --- */
        .form-groupLink {
            margin-bottom: 20px;
        }

        .form-groupLink label {
            display: block;
            font-size: 0.875rem; /* 14px */
            font-weight: 600;
            color: #5e6c84;
            margin-bottom: 8px;
        }

        .text-inputLink {
            width: 100%;
            padding: 10px 12px;
            font-size: 0.9375rem; /* 15px */
            border: 2px solid #dfe1e6;
            border-radius: 4px;
            background-color: #fafbfc;
            box-sizing: border-box;
            transition: border-color 0.2s, background-color 0.2s;
        }

        .text-inputLink::placeholder {
            color: #a5adba;
        }

        .text-inputLink:focus {
            outline: none;
            border-color: #4c9aff;
            background-color: #ffffff;
        }

        /* --- Nh√≥m n√∫t b·∫•m --- */
        .button-groupLink {
            display: flex;
            justify-content: flex-end; /* CƒÉn c√°c n√∫t v·ªÅ b√™n ph·∫£i */
            gap: 8px; /* Kho·∫£ng c√°ch gi·ªØa c√°c n√∫t */
            margin-top: 24px;
        }

        .btn {
            padding: 9px 16px;
            font-size: 0.9375rem; /* 15px */
            font-weight: 500;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s, color 0.2s;
        }

        .btn-primaryLink {
            background-color: #2c3e50; /* M√†u n·ªÅn ch√≠nh */
            color: #ffffff;
        }

        .btn-primaryLink:hover {
            background-color: #34495e;
        }

        /*k√©o th·∫£*/
        .sortable-ghost {
            opacity: 0.4;
        }

        .sortable-drag {
            background-color: #f0f8ff;
            border: 1px dashed #1890ff;
        }

        .dropdown-container {
            position: relative; /* ƒê√¢y l√† d√≤ng quan tr·ªçng nh·∫•t! */
            display: inline-block; /* Gi√∫p container ch·ªâ r·ªông b·∫±ng n√∫t b·∫•m */
        }

        /* Style cho menu th·∫£ xu·ªëng */
        .dropdown-content {
            display: none; /* M·∫∑c ƒë·ªãnh ·∫©n */
            position: absolute;
            top: 100%; /* Hi·ªÉn th·ªã ngay b√™n d∆∞·ªõi button (c·ªßa .dropdown-container) */
            left: 0;
            background-color: #ffffff;
            min-width: 220px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.15);
            border: 1px solid #ddd;
            border-radius: 6px;
            z-index: 10; /* TƒÉng z-index ƒë·ªÉ ch·∫Øc ch·∫Øn n√≥ n·∫±m tr√™n c√°c ph·∫ßn t·ª≠ kh√°c */
            margin-top: 5px;
            padding: 8px 0;
        }

        /* C√°c m·ª•c trong menu */
        .dropdown-content a {
            color: #212529;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            font-size: 15px;
        }

        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }
        /* Class 'show' n√†y s·∫Ω ƒë∆∞·ª£c JS th√™m v√†o ƒë·ªÉ hi·ªán menu */
        .show {
            display: block;
        }

        .modal-overlay {
            display: none; /* M·∫∑c ƒë·ªãnh ·∫©n */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* M√†u ƒëen m·ªù */
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        /* Class 'show' ƒë·ªÉ JS hi·ªÉn th·ªã modal */
        .modal-overlay.show {
            display: flex;
        }

        /* N·ªôi dung ch√≠nh c·ªßa Modal */
        .modal-content {
            background-color: #ffffff;
            padding: 24px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            width: 100%;
            max-width: 480px; /* ƒê·ªô r·ªông c·ªßa modal */
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Ph·∫ßn Header: Ti√™u ƒë·ªÅ v√† n√∫t ƒë√≥ng */
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e5e5e5;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }

        .close-button {
            background: none;
            border: none;
            font-size: 24px;
            color: #888;
            cursor: pointer;
            line-height: 1;
        }
        .close-button:hover {
            color: #000;
        }

        /* Ph·∫ßn Body: Form */
        .modal-body .form-group {
            margin-bottom: 16px;
        }

        .modal-body label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
            color: #555;
        }

        /* Wrapper cho input/select ƒë·ªÉ ch·ª©a icon */
        .input-wrapper {
            position: relative;
        }

        /* Style chung cho input v√† select */
        .form-control {
            width: 100%;
            padding: 10px 12px;
            font-size: 15px;
            border: 1px solid #dcdcdc;
            border-radius: 6px;
            box-sizing: border-box; /* Quan tr·ªçng ƒë·ªÉ padding kh√¥ng l√†m tƒÉng width */
            background-color: #fff;
            -webkit-appearance: none; /* X√≥a style m·∫∑c ƒë·ªãnh c·ªßa tr√¨nh duy·ªát */
            -moz-appearance: none;
            appearance: none;
        }

        .form-control:focus {
            border-color: #007bff;
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }

        /* Style cho c√°c icon b√™n trong input */
        .input-wrapper .icon {
            position: absolute;
            top: 50%;
            right: 12px;
            transform: translateY(-50%);
            color: #888;
            pointer-events: none; /* ƒê·ªÉ c√≥ th·ªÉ click xuy√™n qua icon */
        }

        .input-wrapper .icon svg {
            width: 16px;
            height: 16px;
        }

        /* C·∫ßn padding-right ƒë·ªÉ ch·ªØ kh√¥ng b·ªã icon ƒë√® l√™n */
        .input-wrapper input, .input-wrapper select {
            padding-right: 40px;
        }

        /* Ph·∫ßn Footer: C√°c n√∫t b·∫•m */
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 8px; /* Kho·∫£ng c√°ch gi·ªØa c√°c n√∫t */
            margin-top: 24px;
        }

        .btn {
            padding: 8px 16px;
            font-size: 15px;
            font-weight: 500;
            border-radius: 6px;
            border: 1px solid #dcdcdc;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
        }

        .btn-secondary {
            background-color: #fff;
            color: #333;
        }
        .btn-secondary:hover {
            background-color: #f1f1f1;
        }

        .btn-primary {
            background-color: #e7f1ff; /* N·ªÅn xanh d∆∞∆°ng nh·∫°t */
            color: #007bff; /* Ch·ªØ xanh d∆∞∆°ng ƒë·∫≠m */
            border-color: #a9cfff; /* Vi·ªÅn xanh nh·∫°t h∆°n */
        }
        .btn-primary:hover {
            background-color: #dbeaff;
            border-color: #87baff;
        }
    </style>
</head>
<body>

<div class="project-container">
    <header class="project-header">
        <div class="project-title">
            <h1 th:text="'T√™n D·ª± √Ån: ' + ${tenDuAn}">T√™n D·ª± √Ån</h1>
            <span class="project-status"
                  th:classappend="${trangThaiDuAn} ? 'status-inprogress' : 'status-completed'"
                  th:text="${trangThaiDuAn} ? 'ƒêang di·ªÖn ra' : 'ƒê√£ k·∫øt th√∫c'">
                Tr·∫°ng th√°i
            </span>
        </div>
        <div class="actions-bar">
            <div class="search-group" style="display: flex; align-items: center; gap: 10px;">
                <input type="text" placeholder="T√¨m Ki·∫øm">
                <label>Th√†nh vi√™n :</label>
                <div style="display: flex; gap: 6px; align-items: center;">
                    <span th:each="tv : ${thanhVienThamGiaDuAn}"
                          style="display: inline-block; width: 32px; height: 32px; background: #2c2177; color: #fff; border-radius: 50%; text-align: center; line-height: 32px; font-weight: bold; font-size: 16px;"
                          th:title="${tv.idNguoiDung.hoTen}">
                        <span th:text="${#strings.toUpperCase(tv.idNguoiDung.hoTen.substring(0,1))}">A</span>
                    </span>
                </div>
            </div>
            <div class="button-group">
                <div class="dropdown-container">
                    <button id="pollBtn" class="btn btn-light">
                        <svg fill="currentColor" viewBox="0 0 20 20"><path d="M17 3H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM3 13V5h14l.001 8H3zm5-5H6v2h2V8zm4 0h-2v2h2V8zm4 0h-2v2h2V8z"></path></svg>
                        B√¨nh ch·ªçn
                    </button>
                    <div id="pollDropdown" class="dropdown-content">
                        <a href="#create" id="openModalBtn">T·∫°o cu·ªôc b√¨nh ch·ªçn</a>
                        <a th:href="@{/hien-thi-chi-tiet-binh-chon}">Chi ti·∫øt cu·ªôc b√¨nh ch·ªçn</a>
                    </div>
                </div>

                <button class="btn btn-light">
                    <svg fill="currentColor" viewBox="0 0 20 20"><path d="M3 5h14v2H3zM3 9h14v2H3zM3 13h14v2H3z"></path></svg>
                    Sprint ho√†n th√†nh
                </button>
            </div>
        </div>
    </header>

    <main>
        <div th:each="gd : ${dsGiaiDoan}">
            <section class="card">
                <div class="card-header">
                    <span class="toggle-icon">&gt;</span>
                    <h3 th:text="${gd.tenGiaiDoan}">T√™n giai ƒëo·∫°n</h3>
                    <span class="date-range"
                          th:text="${gd.ngayBatDau} + ' - ' + ${gd.ngayKetThuc}">
                        Ng√†y b·∫Øt ƒë·∫ßu - Ng√†y k·∫øt th√∫c
                    </span>
                    <div class="deleteGiaiDoan">
                        <a th:href="@{/deleteGiaiDoan/{id}(id=${gd.id})}"
                           onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a giai ƒëo·∫°n n√†y kh√¥ng?')"
                           class="deleteGiaiDoan">
                            <i class="bi bi-trash3"></i>
                        </a>
                    </div>
                    <div class="header-buttons">
                        <button class="btn btn-primary"
                                th:if="${gd.trangThai}" disabled
                        >
                            Ho√†n th√†nh
                        </button>
                        <button class="btn btn-secondary">Chi ti·∫øt</button>
                    </div>
                </div>
                <div class="card-body empty">
                    <div class="task-input-area" th:attr="data-gd-id=${gd.id}" >
                        <th:block th:if="${dsCongViecTheoDuAn != null and #maps.containsKey(dsCongViecTheoDuAn, gd.id)}">
                            <div th:each="cv : ${dsCongViecTheoDuAn[gd.id]}" class="task-item" th:attr="data-id=${cv.id}">

                                <div class="task-left-section">
                                    <input type="checkbox" class="task-checkbox"/>
                                    <span class="task-name" th:text="${cv.tenCongViec}">
                                        T√™n c√¥ng vi·ªác
                                    </span>
                                </div>
                                <div class="task-meta">
                                    <span class="task-date" th:text="${cv.ngayTao}">
                                        Ng√†y t·∫°o
                                    </span>
                                    <span class="task-priority priority-thap" th:text="${cv.doUuTien}">

                                    </span> <!-- C√≥ th·ªÉ th√™m logic n·∫øu b·∫°n c√≥ field ƒë·ªô ∆∞u ti√™n -->
                                </div>
                                <div class="task-voting">
                                    <span>B√¨nh ch·ªçn :</span>
                                    <div class="progress-bar-container">
                                        <div class="progress-bar-fill" style="width: 0%;"></div>
                                    </div>
                                    <span class="percentage">0%</span>
                                </div>
                                <div>
                                    <a th:href="@{/detail/{id}(id=${cv.id}, idDuAn=${idDuAn})}" style="text-decoration: none; color: inherit;">
                                        <i class="bi bi-pencil-square"></i>
                                    </a>
                                </div>
                                <div class="task-actions">
                                    <a th:href="@{'/deleteCongViec/' + ${cv.id} + '?idDuAn=' + ${idDuAn}}"
                                       onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a c√¥ng vi·ªác n√†y kh√¥ng?')">
                                        <i class="bi bi-trash"></i>
                                    </a>
                                </div>
                            </div>
                        </th:block>
                    </div>
                </div>
            </section>
        </div>

        <section class="card">
            <div class="card-footer">
                <button class="btn btn-add" id="btnTaoGiaiDoan">
                    <svg fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 18a8 8 0 100-16 8 8 0 000 16zm-1-9H6v2h3v3h2v-3h3V9h-3V6h-2v3z"></path>
                    </svg>
                    T·∫°o giai ƒëo·∫°n
                </button>
            </div>
            <form th:action="@{/add-giai-doan}" method="post" th:object="${giaoViec}">
                <div class="inputContainer" style="display:none; margin-top: 10px;">
                    <input type="text" class="tenGiaoViec" name="tenGiaoViec" placeholder="Nh·∫≠p t√™n giai ƒëo·∫°n..." />
                    <input type="hidden" name="idDuAn" th:value="${idDuAn}" />
                    <button class="btnLuuGiaiDoan">L∆∞u</button>
                </div>
            </form>
        </section>

        <section class="card">
            <div class="card-header">
                <span class="toggle-icon">&gt;</span>
                <h3>Danh s√°ch c√¥ng vi·ªác</h3>
            </div>

            <div class="card-body">
                <div class="task-input-area">

                    <div  class="task-item" th:each="cv : ${dsCongViec}" th:attr="data-id=${cv.id}">

                        <div class="task-left-section">
                            <input type="checkbox" class="task-checkbox"/>
                            <span class="task-name" th:text="${cv.tenCongViec}">
                                T√™n c√¥ng vi·ªác
                            </span>
                        </div>
                        <div class="task-meta">
                            <span class="task-date" th:text="${cv.ngayTao}">
                                Ng√†y t·∫°o
                            </span>
                            <span class="task-priority priority-thap" th:text="${cv.doUuTien}">

                            </span> <!-- C√≥ th·ªÉ th√™m logic n·∫øu b·∫°n c√≥ field ƒë·ªô ∆∞u ti√™n -->
                        </div>
                        <div class="task-voting">
                            <span>B√¨nh ch·ªçn :</span>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" style="width: 0%;"></div>
                            </div>
                            <span class="percentage">0%</span>
                        </div>
                        <div>
                            <a th:href="@{/detail/{id}(id=${cv.id}, idDuAn=${idDuAn})}" style="text-decoration: none; color: inherit;">
                                <i class="bi bi-pencil-square"></i>
                            </a>
                        </div>
                        <div class="task-actions">
                            <a th:href="@{'/deleteCongViec/' + ${cv.id} + '?idDuAn=' + ${idDuAn}}"
                               onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a c√¥ng vi·ªác n√†y kh√¥ng?')">
                                <i class="bi bi-trash"></i>
                            </a>
                        </div>
                    </div>

                </div>

            </div>

            <div class="card-footer">
                <button class="btn btn-add" id="btnTaoCongViec">
                    <svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm-1-9H6v2h3v3h2v-3h3V9h-3V6h-2v3z"></path></svg>
                    T·∫°o c√¥ng vi·ªác
                </button>
                <form th:action="@{/add-cong-viec}" method="post">
                    <div class="inputCongViec" style="display:none; margin-top: 10px;">
                        <input type="text" class="tenDanhSachCongViec" name="tenDanhSachCongViec" placeholder="Nh·∫≠p t√™n c√¥ng vi·ªác..." />
                        <input type="hidden" name="idDuAn" th:value="${idDuAn}" />
                        <button class="btnLuuCongViec" type="submit">L∆∞u</button>
                    </div>
                </form>
            </div>
        </section>

        <div id="formChiTiet" data-task-id="[[${congViecChiTiet.id}]]" class="formCongViecChiTiet" th:if="${openModal}" style="display:none;">
            <div class="main-content" th:object="${congViecChiTiet}">
                <h1 th:text="*{tenCongViec}">Code giao di·ªán</h1>

                <div style="display:flex; gap:20px; align-items:center; margin-bottom:20px;">
                    <div>üîñ
                        <button><span class="icon" th:text="*{nhanDan}"></span></button>
                        <button><span class="icon">+</span> Th√†nh vi√™n</button>
                    </div>
                    <div class="priority-group">
                        <span>ƒê·ªô ∆∞u ti√™n:</span>
                        <form th:action="@{/update-cong-viec-do-uu-tien}" method="post">
                            <input type="hidden" name="idDuAn" th:value="${idDuAn}" />
                            <input type="hidden" name="id" th:value="${congViecChiTiet.id}" />
                            <select name="doUuTien" onchange="this.form.submit()">
                                <option value="Quan tr·ªçng" th:selected="${congViecChiTiet.doUuTien == 'Quan tr·ªçng'}">üí° Quan tr·ªçng</option>
                                <option value="Cao" th:selected="${congViecChiTiet.doUuTien == 'Cao'}">üî• Cao</option>
                                <option value="Trung b√¨nh" th:selected="${congViecChiTiet.doUuTien == 'Trung b√¨nh'}">üõ°Ô∏è Trung b√¨nh</option>
                                <option value="Th·∫•p" th:selected="${congViecChiTiet.doUuTien == 'Th·∫•p'}">‚¨áÔ∏è Th·∫•p</option>
                            </select>
                        </form>

                    </div>

                </div>
                <div>Ki·ªÉu c√¥ng vi·ªác: <span th:text="${congViecChiTiet.kieuCv}"></span></div>
                <div class="form-section">
                    <form th:action="@{/update-mo-ta}" method="post">
                        <input type="hidden" name="idDuAn" th:value="${idDuAn}" />
                        <input type="hidden" name="id" th:value="${congViecChiTiet.id}" />

                        <h3><span class="icon">üìÑ</span> M√¥ t·∫£</h3>
                        <textarea id="moTaTextarea"
                                  placeholder="Th√™m m√¥ t·∫£..."
                                  onfocus="hienNutLuu()"
                                  name="moTa"
                                  th:text="${congViecChiTiet.moTa}"></textarea>

                        <button id="nutLuuMoTa" class="add-button" type="submit" style="display: none;">
                            L∆∞u
                        </button>
                    </form>
                </div>


                <div class="form-section">
                    <h3><span class="icon">‚òëÔ∏è</span> Nh·ªØng vi·ªác c·∫ßn l√†m</h3>
                    <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                        <span>0%</span>
                        <div class="progress-bar-container" style="flex-grow:1;">
                            <div class="progress-bar"></div>
                        </div>
                    </div>
                    <button class="add-button">+ Th√™m</button>
                </div>
                <div class="form-section">
                    <div style="text-align: center;">
                        <img th:src="@{'/uploads/' + ${congViecChiTiet.taiAnh}}" alt="·∫¢nh s·∫£n ph·∫©m" width="300px" style="padding: 10px;"/>
                    </div>
                </div>

                <div class="form-section">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <h3><span class="icon">üí¨</span> B√¨nh lu·∫≠n</h3>
                        <span class="toggle-details">Hi·ªÉn th·ªã Chi ti·∫øt</span>
                    </div>
                    <div class="comment-box">
                        <div class="avatar"></div>
                        <div class="comment-input">
                            <textarea placeholder="Vi·∫øt b√¨nh lu·∫≠n... nh·∫≠p @ ƒë·ªÉ nh·∫Øc t·ªõi ai ƒë√≥"></textarea>
                            <span class="send-icon">‚û¢</span>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <h3><span class="icon">‚è±Ô∏è</span> Ho·∫°t ƒë·ªông</h3>
                        <span class="toggle-details">Xem ƒë·∫ßy ƒë·ªß</span>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="sidebar-header">
                    <h4>Th√™m v√†o th·∫ª</h4>
                    <span class="close-btn" onclick="anFormChiTiet()">
                        √ó
                    </span>
                </div>
                <ul>
                    <li class="sidebar-item"><span class="icon">üë§</span> Th√†nh vi√™n</li>
                    <li class="sidebar-item" id="kieuCVButton"><span class="icon">üè∑Ô∏è</span> Ki·ªÉu c√¥ng vi·ªác</li>
                    <li class="sidebar-item" id="nhanButton"><span class="icon">üîñ</span> Nh√£n</li>
                    <li class="sidebar-item" id="ngayHanButton"><span class="icon">üìÖ</span> Ng√†y h·∫°n</li>
                    <li class="sidebar-item" id="anhButton"><span class="icon">‚§í` </span>  T·∫£i ·∫£nh l√™n</li>
                    <li class="sidebar-item" id="linkButton"><span class="icon">üîó</span> Link ƒë√≠nh k√®m</li>
                </ul>
            </div>
        </div>

        <form th:action="@{/update-KieuCv}" id="fromKieuCV" class="fromKieuCV" th:if="${congViecChiTiet != null}"
              style="display: none" method="post">
            <!-- üëá L·∫•y l·∫°i id t·ª´ input ·∫©n khi form n√†y ƒë∆∞·ª£c m·ªü -->
            <input type="hidden" name="id" th:value="${congViecChiTiet.id}" />
            <input type="hidden" name="idDuAn" th:value="${idDuAn}" />
            <div class="label-modal-overlay">
                <div class="label-form-container">
                    <div class="label-form-header">
                        <h3>Ki·ªÉu c√¥ng vi·ªác</h3>
                        <button type="button" class="close-button" onclick="anFormNhan()">x</button>
                    </div>

                    <input type="text" name="KieuCv" class="label-search-input" placeholder="Th√™m c√¥ng vi·ªác" />

                    <button class="add-label-button" type="submit">
                        <span class="icon">+</span> Th√™m c√¥ng vi·ªác
                    </button>
                </div>
            </div>
        </form>
        <form th:action="@{/update-nhan}" id="fromNhan" class="fromNhan" th:if="${congViecChiTiet != null}"
              style="display: none" method="post">
            <!-- üëá L·∫•y l·∫°i id t·ª´ input ·∫©n khi form n√†y ƒë∆∞·ª£c m·ªü -->
            <input type="hidden" name="id" th:value="${congViecChiTiet.id}" />
            <input type="hidden" name="idDuAn" th:value="${idDuAn}" />
            <div class="label-modal-overlay">
                <div class="label-form-container">
                    <div class="label-form-header">
                        <h3>Danh s√°ch nh√£n</h3>
                        <button type="button" class="close-button" onclick="anFormNhan()">x</button>
                    </div>

                    <input type="text" name="nhanDan" class="label-search-input" placeholder="T√¨m ki·∫øm theo t√™n nh√£n" />

                    <button class="add-label-button" type="submit">
                        <span class="icon">+</span> Th√™m nh√£n
                    </button>
                </div>
            </div>
        </form>

        <form th:action="@{/update-ngay-han}" id="fromNgayHan" class="fromNgayHan" th:if="${congViecChiTiet != null}" method="post">
            <input type="hidden" name="id" th:value="${congViecChiTiet.id}" />
            <input type="hidden" name="idDuAn" th:value="${idDuAn}" />
            <div class="modal-container" >
                <div class="modal-header">
                    <h2>Ng√†y h·∫°n</h2>
                    <button type="button" class="close-buttonNgayHan" aria-label="ƒê√≥ng">x</button>
                </div>

                <div class="form-group">
                    <label for="due-date">Th·ªùi gian:</label>
                    <div class="date-input-wrapper">
                        <input type="date" name="ngayHetHan" id="due-date" class="input-field" placeholder="Select date">
                    </div>
                </div>

                <div class="button-group">
                    <button type="submit" class="btn btn-save">L∆∞u</button>
                </div>
            </div>
        </form>


        <form th:action="@{/update-anh}" class="fromAnh" id="fromAnh" method="post" th:if="${congViecChiTiet != null}" enctype="multipart/form-data">
            <input type="hidden" name="id" th:value="${congViecChiTiet.id}" />
            <input type="hidden" name="idDuAn" th:value="${idDuAn}" />
            <div class="upload-modal">
                <div class="modal-header">
                    <h2>T·∫£i ·∫£nh l√™n</h2>
                    <button type="button" class="close-buttonAnh" aria-label="ƒê√≥ng">x</button>
                </div>
                <div class="form-group">
                    <label >
                        Ch·ªçn ·∫£nh
                    </label>
                    <input id="file-upload" name="taiAnh" type="file"/>
                </div>

                <button type="submit" class="submit-button">T·∫£i ·∫£nh l√™n</button>
            </div>
        </form>

        <form  th:action="@{/update-link}" id="formLink" class="formLink" method="post" th:if="${congViecChiTiet != null}" >
            <input type="hidden" name="id" th:value="${congViecChiTiet.id}" />
            <input type="hidden" name="idDuAn" th:value="${idDuAn}" />
            <div class="modal-containerLink">
                <div class="modal-header">
                    <h2>Th√™m link ƒë√≠nh k√®m</h2>
                    <button type="button" class="close-buttonLink" aria-label="ƒê√≥ng">x</button>
                </div>
                <form>
                    <div class="form-groupLink">
                        <label for="attachment-link">Link ƒë√≠nh k√®m:</label>
                        <input type="text" name="linkDinhKem" id="attachment-link" class="text-inputLink" placeholder="D√°n link ƒë√≠nh k√®m">
                    </div>
                    <div class="button-groupLink">
                        <button type="submit" class="btn btn-primaryLink">Th√™m link ƒë√≠nh k√®m</button>
                    </div>
                </form>
            </div>
        </form>

    </main>
</div>

<div id="pollModal" class="modal-overlay">
    <div class="modal-content">
        <!-- Header -->
        <div class="modal-header">
            <h2>T·∫°o cu·ªôc b√¨nh ch·ªçn</h2>
            <button class="close-button">√ó</button>
        </div>

        <!-- Body -->
        <div class="modal-body">
            <form id="pollForm" action="/add-binh-chon" th:object="${binhChon}" method="post">
                <div class="form-group">
                    <label for="phase-select">Ch·ªçn giai ƒëo·∫°n</label>
                    <div class="input-wrapper">
                        <select id="phase-select" class="form-control" name="idGiaiDoan">
                            <option th:each="gv: ${dsGiaiDoan}"
                                    th:value="${gv.id}"
                                    th:text="${gv.tenGiaiDoan}"></option>
                        </select>
                        <span class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                        </span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="start-date">Ng√†y b·∫Øt ƒë·∫ßu</label>
                    <div class="input-wrapper">
                        <input type="date" id="start-date" class="form-control" name="ngayBatDau">
                        <span class="icon">
                             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                        </span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="end-date">Ng√†y k·∫øt th√∫c c·ª• th·ªÉ</label>
                    <div class="input-wrapper">
                        <input type="date" id="end-date" class="form-control" name="ngayKetThuc">
                        <span class="icon">
                             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                        </span>
                    </div>
                </div>

                <input type="hidden" name="idDuAn" th:value="${idDuAn}" />

                <div class="modal-footer">
                    <button class="btn btn-secondary" id="cancelBtn">Cancel</button>
                    <button class="btn btn-primary" id="okBtn" type="submit" >OK</button>
                </div>
            </form>
        </div>

        <!-- Footer -->

    </div>
</div>
</body>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<script th:inline="javascript">
    document.addEventListener('DOMContentLoaded', function() {

        // ---- LOGIC CHO DROPDOWN B√åNH CH·ªåN (ƒê√É S·ª¨A) ---- //
        const pollBtn = document.getElementById('pollBtn');
        const pollDropdown = document.getElementById('pollDropdown');

        if (pollBtn && pollDropdown) {
            pollBtn.addEventListener('click', function(event) {
                // Khi click v√†o n√∫t, b·∫≠t/t·∫Øt menu dropdown
                pollDropdown.classList.toggle('show');
            });
        }

        // L·∫Øng nghe s·ª± ki·ªán click tr√™n to√†n b·ªô trang
        document.addEventListener('click', function(event) {
            // N·∫øu dropdown ƒëang m·ªü V√Ä click kh√¥ng ph·∫£i l√† v√†o n√∫t "B√¨nh ch·ªçn" ho·∫∑c v√†o trong dropdown
            if (pollDropdown && pollDropdown.classList.contains('show') && !pollBtn.contains(event.target) && !pollDropdown.contains(event.target)) {
                // th√¨ ƒë√≥ng dropdown l·∫°i
                pollDropdown.classList.remove('show');
            }
        });


        // ---- SCRIPT CHO C√ÅC N√öT T·∫†O ---- //
        const btnTaoGiaiDoan = document.getElementById('btnTaoGiaiDoan');
        if (btnTaoGiaiDoan) {
            const inputContainer = document.querySelector('.inputContainer');
            btnTaoGiaiDoan.addEventListener('click', function() {
                if (inputContainer.style.display === 'none' || inputContainer.style.display === '') {
                    inputContainer.style.display = 'block';
                } else {
                    inputContainer.style.display = 'none';
                }
            });
        }

        const btnTaoCongViec = document.getElementById('btnTaoCongViec');
        if(btnTaoCongViec){
            const inputCongViec = document.querySelector('.inputCongViec');
            btnTaoCongViec.addEventListener('click', function() {
                if (inputCongViec.style.display === 'none' || inputCongViec.style.display === '') {
                    inputCongViec.style.display = 'block';
                } else {
                    inputCongViec.style.display = 'none';
                }
            });
        }

        // ---- SCRIPT CHO MODAL CHI TI·∫æT C√îNG VI·ªÜC ---- //
        /*<![CDATA[*/
        let shouldOpenDetailModal = /*[[${openModal}]]*/ false;
        if (shouldOpenDetailModal) {
            const formChiTiet = document.getElementById("formChiTiet");
            if(formChiTiet) {
                formChiTiet.style.display = "flex";
            }
        }
        /*]]>*/

        // Ch·ªâ g√°n s·ª± ki·ªán n·∫øu c√°c n√∫t v√† form t·ªìn t·∫°i trong HTML
        const kieuCVButton = document.getElementById("kieuCVButton");
        const formKieuCV = document.getElementById("fromKieuCV");
        if (kieuCVButton && formKieuCV) {
            const closeBtn = formKieuCV.querySelector(".close-button");
            kieuCVButton.addEventListener("click", function () {
                formKieuCV.style.display = "flex";
            });
            if(closeBtn) {
                closeBtn.addEventListener("click", function () {
                    formKieuCV.style.display = "none";
                });
            }
        }

        const nhanButton = document.getElementById("nhanButton");
        const formNhan = document.getElementById("fromNhan");
        if (nhanButton && formNhan) {
            const closeBtn = formNhan.querySelector(".close-button");
            nhanButton.addEventListener("click", function () {
                formNhan.style.display = "flex";
            });
            if(closeBtn) {
                closeBtn.addEventListener("click", function () {
                    formNhan.style.display = "none";
                });
            }
        }

        const ngayHanButton = document.getElementById("ngayHanButton");
        const formNgayHan = document.getElementById("fromNgayHan");
        if(ngayHanButton && formNgayHan) {
            const closeBtn = formNgayHan.querySelector(".close-buttonNgayHan");
            ngayHanButton.addEventListener("click", function () {
                formNgayHan.style.display = "flex";
            });
            if(closeBtn) {
                closeBtn.addEventListener("click", function () {
                    formNgayHan.style.display = "none";
                });
            }
        }

        const anhButton = document.getElementById("anhButton");
        const formAnh = document.getElementById("fromAnh");
        if(anhButton && formAnh){
            const closeBtn = formAnh.querySelector(".close-buttonAnh");
            anhButton.addEventListener("click", function () {
                formAnh.style.display = "flex";
            });
            if(closeBtn) {
                closeBtn.addEventListener("click", function () {
                    formAnh.style.display = "none";
                });
            }
        }

        const linkButton = document.getElementById("linkButton");
        const formLink = document.getElementById("formLink");
        if(linkButton && formLink){
            const closeBtn = formLink.querySelector(".close-buttonLink");
            linkButton.addEventListener("click", function () {
                formLink.style.display = "flex";
            });
            if(closeBtn) {
                closeBtn.addEventListener("click", function () {
                    formLink.style.display = "none";
                });
            }
        }

        // ---- SCRIPT K√âO TH·∫¢ ---- //
        document.querySelectorAll('.task-input-area').forEach(function(el) {
            new Sortable(el, {
                group: 'shared-tasks',
                animation: 150,
                onAdd: function (evt) {
                    const idCongViec = evt.item.dataset.id;
                    const idGiaiDoan = evt.to.dataset.gdId;

                    fetch("/cong-viec/gan-giai-doan", {
                        method: "POST",
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded'
                        },
                        body: `idCongViec=${idCongViec}&idGiaiDoan=${idGiaiDoan}`
                    })
                        .then(res => res.text())
                        .then(msg => console.log(msg)); // Log ra console thay v√¨ alert
                }
            });
        });

        // ---- SCRIPT CHO MODAL B√åNH CH·ªåN ---- //
        const pollModal = document.getElementById('pollModal');
        const openPollBtn = document.getElementById('openModalBtn');

        if (pollModal && openPollBtn) {
            const closePollBtn = pollModal.querySelector('.close-button');
            const cancelPollBtn = document.getElementById('cancelBtn');

            const openPollModal = () => { pollModal.style.display = 'flex'; };
            const closePollModal = () => { pollModal.style.display = 'none'; };

            openPollBtn.addEventListener('click', openPollModal);
            closePollBtn.addEventListener('click', closePollModal);
            cancelPollBtn.addEventListener('click', closePollModal);

            pollModal.addEventListener('click', (event) => {
                if (event.target === pollModal) {
                    closePollModal();
                }
            });

            window.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && pollModal.style.display === 'flex') {
                    closePollModal();
                }
            });
        }
    });

    // ---- C√ÅC H√ÄM TI·ªÜN √çCH TO√ÄN C·ª§C ---- //
    function anFormChiTiet() {
        const form = document.getElementById('formChiTiet');
        if (form) {
            form.style.display = 'none';
            const url = new URL(window.location);
            url.searchParams.delete('idDuAn'); // X√≥a c√°c param kh√¥ng c·∫ßn thi·∫øt
            url.searchParams.delete('id');
            window.history.pushState({}, '', url); // C·∫≠p nh·∫≠t URL m√† kh√¥ng reload
        }
    }

    function hienNutLuu() {
        const nut = document.getElementById("nutLuuMoTa");
        if(nut) {
            nut.style.display = "inline-block";
        }
    }
</script>
</html>